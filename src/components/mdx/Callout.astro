---
/**
 * Callout Component
 * 
 * Usage in MDX:
 * <Callout type="warning" title="Performance Impact">
 *   This operation has O(n¬≤) complexity.
 * </Callout>
 * 
 * Types: info, warning, danger, tip, perf
 */

interface Props {
  type?: 'info' | 'warning' | 'danger' | 'tip' | 'perf';
  title?: string;
}

const { type = 'info', title } = Astro.props;

const icons = {
  info: '‚ÑπÔ∏è',
  warning: '‚ö†Ô∏è',
  danger: 'üö®',
  tip: 'üí°',
  perf: '‚ö°',
};

const defaultTitles = {
  info: 'Note',
  warning: 'Warning',
  danger: 'Danger',
  tip: 'Tip',
  perf: 'Performance',
};

const displayTitle = title || defaultTitles[type];
---

<div class:list={['callout', `callout-${type}`]} role="note">
  <div class="callout-header">
    <span class="callout-icon">{icons[type]}</span>
    <span class="callout-title">{displayTitle}</span>
  </div>
  <div class="callout-content">
    <slot />
  </div>
</div>

<style lang="scss">
  @use '../../styles/variables' as *;
  
  .callout {
    margin: $space-6 0;
    padding: $space-4 $space-5;
    border-radius: $border-radius-md;
    border: 1px solid;
    border-left-width: 4px;
  }
  
  .callout-header {
    display: flex;
    align-items: center;
    gap: $space-2;
    margin-bottom: $space-3;
  }
  
  .callout-icon {
    font-size: $font-size-base;
  }
  
  .callout-title {
    font-family: $font-mono;
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    text-transform: uppercase;
    letter-spacing: $letter-spacing-wide;
  }
  
  .callout-content {
    font-size: $font-size-sm;
    line-height: $line-height-relaxed;
    
    :global(p:last-child) {
      margin-bottom: 0;
    }
    
    :global(code) {
      font-size: 0.85em;
    }
  }
  
  // Type variants
  .callout-info {
    background: rgba($color-info, 0.08);
    border-color: rgba($color-info, 0.3);
    
    .callout-title { color: $color-info; }
  }
  
  .callout-warning {
    background: rgba($color-warning, 0.08);
    border-color: rgba($color-warning, 0.3);
    
    .callout-title { color: $color-warning; }
  }
  
  .callout-danger {
    background: rgba($color-error, 0.08);
    border-color: rgba($color-error, 0.3);
    
    .callout-title { color: $color-error; }
  }
  
  .callout-tip {
    background: rgba($color-success, 0.08);
    border-color: rgba($color-success, 0.3);
    
    .callout-title { color: $color-success; }
  }
  
  .callout-perf {
    background: rgba($color-accent-purple, 0.08);
    border-color: rgba($color-accent-purple, 0.3);
    
    .callout-title { color: $color-accent-purple; }
  }
</style>
